import { test, TestSuite } from "./test_suite.ts";
const hooksLocked = [];
function areHooksLocked() {
    return hooksLocked[hooksLocked.length - 1] ?? false;
}
function lockHooks() {
    if (hooksLocked.length === 0) {
        throw new Error("cannot lock hooks on global context");
    }
    hooksLocked[hooksLocked.length - 1] = true;
}
let currentContext = null;
let currentSuite = null;
function describe(a, fn) {
    let options;
    if (typeof a === "string") {
        options = {
            name: a
        };
    } else {
        fn = a.fn;
        options = {
            name: a.name
        };
        if (typeof a.ignore !== "undefined") options.ignore = a.ignore;
        if (typeof a.only !== "undefined") options.only = a.only;
        if (typeof a.sanitizeOps !== "undefined") {
            options.sanitizeOps = a.sanitizeOps;
        }
        if (typeof a.sanitizeResources !== "undefined") {
            options.sanitizeResources = a.sanitizeResources;
        }
        if (typeof a.sanitizeExit !== "undefined") {
            options.sanitizeExit = a.sanitizeExit;
        }
    }
    const parent = currentSuite;
    if (parent) options.suite = parent;
    const suite = new TestSuite(options);
    const parentContext = currentContext;
    currentContext = {
        beforeEach: false,
        afterEach: false,
        beforeAll: false,
        afterAll: false
    };
    if (currentSuite) lockHooks();
    hooksLocked.push(false);
    currentSuite = suite;
    try {
        fn();
    } finally{
        hooksLocked.pop();
        currentContext = parentContext;
        currentSuite = parent;
    }
}
function focusDescribe(ignore, only, a, fn) {
    let options;
    if (typeof a === "string") {
        options = {
            name: a,
            fn: fn
        };
    } else {
        options = {
            ...a
        };
    }
    options.ignore = ignore;
    options.only = only;
    describe(options);
}
function fdescribe(a, fn) {
    focusDescribe(false, true, a, fn);
}
function xdescribe(a, fn) {
    focusDescribe(true, false, a, fn);
}
function it(a, fn) {
    if (currentSuite) lockHooks();
    let options;
    if (typeof a === "string") {
        options = {
            name: a,
            fn: fn
        };
    } else {
        options = {
            name: a.name,
            fn: a.fn
        };
        if (typeof a.ignore !== "undefined") options.ignore = a.ignore;
        if (typeof a.only !== "undefined") options.only = a.only;
        if (typeof a.sanitizeOps !== "undefined") {
            options.sanitizeOps = a.sanitizeOps;
        }
        if (typeof a.sanitizeResources !== "undefined") {
            options.sanitizeResources = a.sanitizeResources;
        }
        if (typeof a.sanitizeExit !== "undefined") {
            options.sanitizeExit = a.sanitizeExit;
        }
    }
    if (currentSuite) options.suite = currentSuite;
    test(options);
}
function each(a, cases, fn) {
    let myOptions;
    if (typeof a === "string") {
        myOptions = {
            name: a,
            fn: fn,
            cases: cases
        };
    } else {
        myOptions = a;
    }
    myOptions.cases.forEach((c)=>it({
            name: Array.isArray(c) ? `${myOptions.name}: ${c}` : `${myOptions.name}: ${c.name}`,
            fn: Array.isArray(c) ? ()=>myOptions.fn(...c) : ()=>myOptions.fn(...c.params),
            ignore: myOptions.ignore,
            only: myOptions.only,
            sanitizeOps: myOptions.sanitizeOps,
            sanitizeResources: myOptions.sanitizeResources,
            sanitizeExit: myOptions.sanitizeExit
        }));
}
function focusIt(ignore, only, a, fn) {
    let options;
    if (typeof a === "string") {
        options = {
            name: a,
            fn: fn
        };
    } else {
        options = {
            ...a
        };
    }
    options.ignore = ignore;
    options.only = only;
    it(options);
}
function fit(a, fn) {
    focusIt(false, true, a, fn);
}
function xit(a, fn) {
    focusIt(true, false, a, fn);
}
function setHook(key, fn) {
    if (!currentSuite) throw new Error(`${key} not allowed globally`);
    if (areHooksLocked()) {
        throw new Error(`${key} must be called before child suites and tests in suite`);
    }
    if (currentContext[key]) {
        throw new Error(`${key} already called for suite`);
    }
    currentContext[key] = true;
    const suite = currentSuite;
    TestSuite.setHooks(suite, {
        [key]: fn
    });
}
/** Run some shared setup before each test in the suite. */ export function beforeEach(fn) {
    setHook("beforeEach", fn);
}
/** Run some shared teardown after each test in the suite. */ export function afterEach(fn) {
    setHook("afterEach", fn);
}
/** Run some shared setup before all of the tests in the suite. */ export function beforeAll(fn) {
    setHook("beforeAll", fn);
}
/** Run some shared teardown after all of the tests in the suite. */ export function afterAll(fn) {
    setHook("afterAll", fn);
}
export { describe, each, fdescribe, fit, it, xdescribe, xit };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvdGVzdF9zdWl0ZUAwLjkuNS9kZXNjcmliZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICB0ZXN0LFxuICBUZXN0RGVmaW5pdGlvbixcbiAgVGVzdFN1aXRlLFxuICBUZXN0U3VpdGVEZWZpbml0aW9uLFxufSBmcm9tIFwiLi90ZXN0X3N1aXRlLnRzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVzY3JpYmVEZWZpbml0aW9uIHtcbiAgLyoqIFRoZSBuYW1lIG9mIHRoZSB0ZXN0IHN1aXRlIHdpbGwgYmUgcHJlcGVuZGVkIHRvIHRoZSBuYW1lcyBvZiB0ZXN0cyBpbiB0aGUgZm4uICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqIFRoZSBjYWxsYmFjayBmb3IgdGhlIHRlc3Qgc3VpdGUuICovXG4gIGZuOiAoKSA9PiB2b2lkO1xuICAvKiogSWdub3JlIGFsbCB0ZXN0cyBpbiBzdWl0ZSBpZiBzZXQgdG8gdHJ1ZS4gKi9cbiAgaWdub3JlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIElmIGF0IGxlYXN0IG9uZSB0ZXN0IHN1aXRlIG9yIHRlc3QgaGFzIG9ubHkgc2V0IHRvIHRydWUsXG4gICAqIG9ubHkgcnVuIHRlc3Qgc3VpdGVzIGFuZCB0ZXN0cyB0aGF0IGhhdmUgb25seSBzZXQgdG8gdHJ1ZS5cbiAgICovXG4gIG9ubHk/OiBib29sZWFuO1xuICAvKipcbiAgICogQ2hlY2sgdGhhdCB0aGUgbnVtYmVyIG9mIGFzeW5jIGNvbXBsZXRlZCBvcHMgYWZ0ZXIgZWFjaCB0ZXN0IGluIHRoZSBzdWl0ZVxuICAgKiBpcyB0aGUgc2FtZSBhcyB0aGUgbnVtYmVyIG9mIGRpc3BhdGNoZWQgb3BzLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgKi9cbiAgc2FuaXRpemVPcHM/OiBib29sZWFuO1xuICAvKipcbiAgICogRW5zdXJlIHRoZSB0ZXN0IGNhc2VzIGluIHRoZSBzdWl0ZSBkbyBub3QgXCJsZWFrXCIgcmVzb3VyY2VzIC0gaWUuIHRoZSByZXNvdXJjZSB0YWJsZVxuICAgKiBhZnRlciBlYWNoIHRlc3QgaGFzIGV4YWN0bHkgdGhlIHNhbWUgY29udGVudHMgYXMgYmVmb3JlIGVhY2ggdGVzdC4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICovXG4gIHNhbml0aXplUmVzb3VyY2VzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEVuc3VyZSB0aGUgdGVzdCBjYXNlIGRvZXMgbm90IHByZW1hdHVyZWx5IGNhdXNlIHRoZSBwcm9jZXNzIHRvIGV4aXQsIGZvciBleGFtcGxlLCB2aWEgYSBjYWxsIHRvIGBkZW5vLmV4aXRgLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgKi9cbiAgc2FuaXRpemVFeGl0PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJdERlZmluaXRpb24ge1xuICAvKiogVGhlIG5hbWUgb2YgdGhlIHRlc3QuICovXG4gIG5hbWU6IHN0cmluZztcbiAgLyoqIFRoZSB0ZXN0IGZ1bmN0aW9uLiAqL1xuICBmbjpcbiAgICB8ICgoKSA9PiB2b2lkKVxuICAgIHwgKCgpID0+IFByb21pc2U8dm9pZD4pO1xuICAvKiogSWdub3JlIHRlc3QgaWYgc2V0IHRvIHRydWUuICovXG4gIGlnbm9yZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJZiBhdCBsZWFzdCBvbmUgdGVzdCBzdWl0ZSBvciB0ZXN0IGhhcyBvbmx5IHNldCB0byB0cnVlLFxuICAgKiBvbmx5IHJ1biB0ZXN0IHN1aXRlcyBhbmQgdGVzdHMgdGhhdCBoYXZlIG9ubHkgc2V0IHRvIHRydWUuXG4gICAqL1xuICBvbmx5PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIENoZWNrIHRoYXQgdGhlIG51bWJlciBvZiBhc3luYyBjb21wbGV0ZWQgb3BzIGFmdGVyIHRoZSB0ZXN0IGlzIHRoZSBzYW1lIGFzXG4gICAqIHRoZSBudW1iZXIgb2YgZGlzcGF0Y2hlZCBvcHMgYWZ0ZXIgdGhlIHRlc3QuIERlZmF1bHRzIHRvIHRydWUuXG4gICAqL1xuICBzYW5pdGl6ZU9wcz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBFbnN1cmUgdGhlIHRlc3QgY2FzZSBkb2VzIG5vdCBcImxlYWtcIiByZXNvdXJjZXMgLSBpZS4gdGhlIHJlc291cmNlIHRhYmxlIGFmdGVyIHRoZSB0ZXN0XG4gICAqIGhhcyBleGVjdGx5IHRoZSBzYW1lIGNvbnRlbnRzIGFzIGJlZm9yZSB0aGUgdGVzdC4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICovXG4gIHNhbml0aXplUmVzb3VyY2VzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEVuc3VyZSB0aGUgdGVzdCBjYXNlIGRvZXMgbm90IHByZW1hdHVyZWx5IGNhdXNlIHRoZSBwcm9jZXNzIHRvIGV4aXQsIGZvciBleGFtcGxlLCB2aWEgYSBjYWxsIHRvIGBkZW5vLmV4aXRgLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgKi9cbiAgc2FuaXRpemVFeGl0PzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIENvbnRleHQge1xuICBiZWZvcmVFYWNoOiBib29sZWFuO1xuICBhZnRlckVhY2g6IGJvb2xlYW47XG4gIGJlZm9yZUFsbDogYm9vbGVhbjtcbiAgYWZ0ZXJBbGw6IGJvb2xlYW47XG59XG5cbmNvbnN0IGhvb2tzTG9ja2VkOiBib29sZWFuW10gPSBbXTtcbmZ1bmN0aW9uIGFyZUhvb2tzTG9ja2VkKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaG9va3NMb2NrZWRbaG9va3NMb2NrZWQubGVuZ3RoIC0gMV0gPz8gZmFsc2U7XG59XG5mdW5jdGlvbiBsb2NrSG9va3MoKTogdm9pZCB7XG4gIGlmIChob29rc0xvY2tlZC5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgbG9jayBob29rcyBvbiBnbG9iYWwgY29udGV4dFwiKTtcbiAgfVxuICBob29rc0xvY2tlZFtob29rc0xvY2tlZC5sZW5ndGggLSAxXSA9IHRydWU7XG59XG5cbmxldCBjdXJyZW50Q29udGV4dDogQ29udGV4dCB8IG51bGwgPSBudWxsO1xubGV0IGN1cnJlbnRTdWl0ZTogVGVzdFN1aXRlPHZvaWQ+IHwgbnVsbCA9IG51bGw7XG5cbi8qKlxuICogQSBncm91cCBvZiB0ZXN0cy4gQSB0ZXN0IHN1aXRlIGNhbiBpbmNsdWRlIGNoaWxkIHRlc3Qgc3VpdGVzLlxuICogVGhlIG5hbWUgb2YgdGhlIHRlc3Qgc3VpdGUgaXMgcHJlcGVuZGVkIHRvIHRoZSBuYW1lIG9mIGVhY2ggdGVzdCB3aXRoaW4gaXQuXG4gKiBUZXN0cyBiZWxvbmdpbmcgdG8gYSBzdWl0ZSB3aWxsIGluaGVyaXQgb3B0aW9ucyBmcm9tIGl0LlxuICovXG5mdW5jdGlvbiBkZXNjcmliZShuYW1lOiBzdHJpbmcsIGZuOiAoKSA9PiB2b2lkKTogdm9pZDtcbmZ1bmN0aW9uIGRlc2NyaWJlKG9wdGlvbnM6IERlc2NyaWJlRGVmaW5pdGlvbik6IHZvaWQ7XG5mdW5jdGlvbiBkZXNjcmliZShhOiBzdHJpbmcgfCBEZXNjcmliZURlZmluaXRpb24sIGZuPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICBsZXQgb3B0aW9uczogVGVzdFN1aXRlRGVmaW5pdGlvbjx2b2lkPiB8IHZvaWQ7XG4gIGlmICh0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIikge1xuICAgIG9wdGlvbnMgPSB7IG5hbWU6IGEgfTtcbiAgfSBlbHNlIHtcbiAgICBmbiA9IGEuZm47XG4gICAgb3B0aW9ucyA9IHsgbmFtZTogYS5uYW1lIH07XG4gICAgaWYgKHR5cGVvZiBhLmlnbm9yZSAhPT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pZ25vcmUgPSBhLmlnbm9yZTtcbiAgICBpZiAodHlwZW9mIGEub25seSAhPT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5vbmx5ID0gYS5vbmx5O1xuICAgIGlmICh0eXBlb2YgYS5zYW5pdGl6ZU9wcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgb3B0aW9ucy5zYW5pdGl6ZU9wcyA9IGEuc2FuaXRpemVPcHM7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYS5zYW5pdGl6ZVJlc291cmNlcyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgb3B0aW9ucy5zYW5pdGl6ZVJlc291cmNlcyA9IGEuc2FuaXRpemVSZXNvdXJjZXM7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYS5zYW5pdGl6ZUV4aXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIG9wdGlvbnMuc2FuaXRpemVFeGl0ID0gYS5zYW5pdGl6ZUV4aXQ7XG4gICAgfVxuICB9XG4gIGNvbnN0IHBhcmVudDogVGVzdFN1aXRlPHZvaWQ+IHwgbnVsbCA9IGN1cnJlbnRTdWl0ZTtcbiAgaWYgKHBhcmVudCkgb3B0aW9ucy5zdWl0ZSA9IHBhcmVudDtcbiAgY29uc3Qgc3VpdGU6IFRlc3RTdWl0ZTx2b2lkPiA9IG5ldyBUZXN0U3VpdGUob3B0aW9ucyk7XG5cbiAgY29uc3QgcGFyZW50Q29udGV4dDogQ29udGV4dCB8IG51bGwgPSBjdXJyZW50Q29udGV4dDtcbiAgY3VycmVudENvbnRleHQgPSB7XG4gICAgYmVmb3JlRWFjaDogZmFsc2UsXG4gICAgYWZ0ZXJFYWNoOiBmYWxzZSxcbiAgICBiZWZvcmVBbGw6IGZhbHNlLFxuICAgIGFmdGVyQWxsOiBmYWxzZSxcbiAgfTtcbiAgaWYgKGN1cnJlbnRTdWl0ZSkgbG9ja0hvb2tzKCk7XG4gIGhvb2tzTG9ja2VkLnB1c2goZmFsc2UpO1xuICBjdXJyZW50U3VpdGUgPSBzdWl0ZTtcbiAgdHJ5IHtcbiAgICBmbiEoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBob29rc0xvY2tlZC5wb3AoKTtcbiAgICBjdXJyZW50Q29udGV4dCA9IHBhcmVudENvbnRleHQ7XG4gICAgY3VycmVudFN1aXRlID0gcGFyZW50O1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIEZvY3VzRGVzY3JpYmVEZWZpbml0aW9uID0gT21pdDxcbiAgRGVzY3JpYmVEZWZpbml0aW9uLFxuICBcImlnbm9yZVwiIHwgXCJvbmx5XCJcbj47XG5mdW5jdGlvbiBmb2N1c0Rlc2NyaWJlKFxuICBpZ25vcmU6IGJvb2xlYW4sXG4gIG9ubHk6IGJvb2xlYW4sXG4gIGE6IHN0cmluZyB8IEZvY3VzRGVzY3JpYmVEZWZpbml0aW9uLFxuICBmbj86ICgpID0+IHZvaWQsXG4pOiB2b2lkIHtcbiAgbGV0IG9wdGlvbnM6IERlc2NyaWJlRGVmaW5pdGlvbiB8IHZvaWQ7XG4gIGlmICh0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIikge1xuICAgIG9wdGlvbnMgPSB7IG5hbWU6IGEsIGZuOiBmbiEgfTtcbiAgfSBlbHNlIHtcbiAgICBvcHRpb25zID0geyAuLi5hIH07XG4gIH1cbiAgb3B0aW9ucy5pZ25vcmUgPSBpZ25vcmU7XG4gIG9wdGlvbnMub25seSA9IG9ubHk7XG4gIGRlc2NyaWJlKG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEEgZm9jdXNlZCBncm91cCBvZiB0ZXN0cy4gQSB0ZXN0IHN1aXRlIGNhbiBpbmNsdWRlIGNoaWxkIHRlc3Qgc3VpdGVzLlxuICogVGhlIG5hbWUgb2YgdGhlIHRlc3Qgc3VpdGUgaXMgcHJlcGVuZGVkIHRvIHRoZSBuYW1lIG9mIGVhY2ggdGVzdCB3aXRoaW4gaXQuXG4gKiBUZXN0cyBiZWxvbmdpbmcgdG8gYSBzdWl0ZSB3aWxsIGluaGVyaXQgb3B0aW9ucyBmcm9tIGl0LlxuICovXG5mdW5jdGlvbiBmZGVzY3JpYmUobmFtZTogc3RyaW5nLCBmbjogKCkgPT4gdm9pZCk6IHZvaWQ7XG5mdW5jdGlvbiBmZGVzY3JpYmUob3B0aW9uczogRm9jdXNEZXNjcmliZURlZmluaXRpb24pOiB2b2lkO1xuZnVuY3Rpb24gZmRlc2NyaWJlKGE6IHN0cmluZyB8IEZvY3VzRGVzY3JpYmVEZWZpbml0aW9uLCBmbj86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgZm9jdXNEZXNjcmliZShmYWxzZSwgdHJ1ZSwgYSwgZm4pO1xufVxuXG4vKipcbiAqIEFuIGlnbm9yZWQgZ3JvdXAgb2YgdGVzdHMuIEEgdGVzdCBzdWl0ZSBjYW4gaW5jbHVkZSBjaGlsZCB0ZXN0IHN1aXRlcy5cbiAqIFRoZSBuYW1lIG9mIHRoZSB0ZXN0IHN1aXRlIGlzIHByZXBlbmRlZCB0byB0aGUgbmFtZSBvZiBlYWNoIHRlc3Qgd2l0aGluIGl0LlxuICogVGVzdHMgYmVsb25naW5nIHRvIGEgc3VpdGUgd2lsbCBpbmhlcml0IG9wdGlvbnMgZnJvbSBpdC5cbiAqL1xuZnVuY3Rpb24geGRlc2NyaWJlKG5hbWU6IHN0cmluZywgZm46ICgpID0+IHZvaWQpOiB2b2lkO1xuZnVuY3Rpb24geGRlc2NyaWJlKG9wdGlvbnM6IEZvY3VzRGVzY3JpYmVEZWZpbml0aW9uKTogdm9pZDtcbmZ1bmN0aW9uIHhkZXNjcmliZShhOiBzdHJpbmcgfCBGb2N1c0Rlc2NyaWJlRGVmaW5pdGlvbiwgZm4/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gIGZvY3VzRGVzY3JpYmUodHJ1ZSwgZmFsc2UsIGEsIGZuKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlciBhIHRlc3Qgd2hpY2ggd2lsbCBydW4gd2hlbiBgZGVubyB0ZXN0YCBpcyB1c2VkIG9uIHRoZSBjb21tYW5kIGxpbmVcbiAqIGFuZCB0aGUgY29udGFpbmluZyBtb2R1bGUgbG9va3MgbGlrZSBhIHRlc3QgbW9kdWxlLlxuICovXG5mdW5jdGlvbiBpdChuYW1lOiBzdHJpbmcsIGZuOiAoKSA9PiB2b2lkKTogdm9pZDtcbmZ1bmN0aW9uIGl0KG9wdGlvbnM6IEl0RGVmaW5pdGlvbik6IHZvaWQ7XG5mdW5jdGlvbiBpdChcbiAgYTogc3RyaW5nIHwgSXREZWZpbml0aW9uLFxuICBmbj86ICgoKSA9PiB2b2lkKSB8ICgoKSA9PiBQcm9taXNlPHZvaWQ+KSxcbik6IHZvaWQge1xuICBpZiAoY3VycmVudFN1aXRlKSBsb2NrSG9va3MoKTtcbiAgbGV0IG9wdGlvbnM6IFRlc3REZWZpbml0aW9uPHZvaWQ+IHwgdm9pZDtcbiAgaWYgKHR5cGVvZiBhID09PSBcInN0cmluZ1wiKSB7XG4gICAgb3B0aW9ucyA9IHsgbmFtZTogYSwgZm46IGZuISB9O1xuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMgPSB7IG5hbWU6IGEubmFtZSwgZm46IGEuZm4gfTtcbiAgICBpZiAodHlwZW9mIGEuaWdub3JlICE9PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLmlnbm9yZSA9IGEuaWdub3JlO1xuICAgIGlmICh0eXBlb2YgYS5vbmx5ICE9PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLm9ubHkgPSBhLm9ubHk7XG4gICAgaWYgKHR5cGVvZiBhLnNhbml0aXplT3BzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBvcHRpb25zLnNhbml0aXplT3BzID0gYS5zYW5pdGl6ZU9wcztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhLnNhbml0aXplUmVzb3VyY2VzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBvcHRpb25zLnNhbml0aXplUmVzb3VyY2VzID0gYS5zYW5pdGl6ZVJlc291cmNlcztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhLnNhbml0aXplRXhpdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgb3B0aW9ucy5zYW5pdGl6ZUV4aXQgPSBhLnNhbml0aXplRXhpdDtcbiAgICB9XG4gIH1cblxuICBpZiAoY3VycmVudFN1aXRlKSBvcHRpb25zLnN1aXRlID0gY3VycmVudFN1aXRlO1xuICB0ZXN0KG9wdGlvbnMpO1xufVxuXG5leHBvcnQgdHlwZSBFYWNoQ2FzZVR5cGU8VD4gPSBUIHwgeyBuYW1lOiBzdHJpbmc7IHBhcmFtczogVCB9O1xuLyoqXG4gKiBEZWZpbml0aW9uIGZvciBhIGRhdGEtZHJpdmVuIHRlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFYWNoRGVmaW5pdGlvbjxUIGV4dGVuZHMgdW5rbm93bltdPiB7XG4gIC8qKiBUaGUgbmFtZSBvZiB0aGUgdGVzdC4gKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKiogVGhlIHRlc3QgZnVuY3Rpb24uICovXG4gIGZuOiAoKC4uLnBhcmFtczogVCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4pO1xuICAvKiogSWdub3JlIHRlc3QgaWYgc2V0IHRvIHRydWUuICovXG4gIGlnbm9yZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJZiBhdCBsZWFzdCBvbmUgdGVzdCBzdWl0ZSBvciB0ZXN0IGhhcyBvbmx5IHNldCB0byB0cnVlLFxuICAgKiBvbmx5IHJ1biB0ZXN0IHN1aXRlcyBhbmQgdGVzdHMgdGhhdCBoYXZlIG9ubHkgc2V0IHRvIHRydWUuXG4gICAqL1xuICBvbmx5PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIENoZWNrIHRoYXQgdGhlIG51bWJlciBvZiBhc3luYyBjb21wbGV0ZWQgb3BzIGFmdGVyIHRoZSB0ZXN0IGlzIHRoZSBzYW1lIGFzXG4gICAqIHRoZSBudW1iZXIgb2YgZGlzcGF0Y2hlZCBvcHMgYWZ0ZXIgdGhlIHRlc3QuIERlZmF1bHRzIHRvIHRydWUuXG4gICAqL1xuICBzYW5pdGl6ZU9wcz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBFbnN1cmUgdGhlIHRlc3QgY2FzZSBkb2VzIG5vdCBcImxlYWtcIiByZXNvdXJjZXMgLSBpZS4gdGhlIHJlc291cmNlIHRhYmxlIGFmdGVyIHRoZSB0ZXN0XG4gICAqIGhhcyBleGVjdGx5IHRoZSBzYW1lIGNvbnRlbnRzIGFzIGJlZm9yZSB0aGUgdGVzdC4gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICovXG4gIHNhbml0aXplUmVzb3VyY2VzPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIEVuc3VyZSB0aGUgdGVzdCBjYXNlIGRvZXMgbm90IHByZW1hdHVyZWx5IGNhdXNlIHRoZSBwcm9jZXNzIHRvIGV4aXQsIGZvciBleGFtcGxlLCB2aWEgYSBjYWxsIHRvIGBkZW5vLmV4aXRgLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgKi9cbiAgc2FuaXRpemVFeGl0PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBjYXNlcyB0byBleGVjdXRlIHRoZSB0ZXN0IGZvclxuICAgKi9cbiAgY2FzZXM6IEVhY2hDYXNlVHlwZTxUPltdO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIHNldCBvZiBpZGVudGljYWwgdGVzdHMgd2l0aCBkaWZmZXJlbnQgcGFyYW1ldGVycyAoZS5nLiB0byB0ZXN0XG4gKiBkaWZmZXJlbnQgaW5wdXRzIHRvIHlvdXIgY29kZSB1bmRlciB0ZXN0IHdpdGhvdXQgY29weSZwYXN0aW5nIHRoZSB0ZXN0IGNvZGUpLlxuICpcbiAqIEBwYXJhbSBuYW1lIFRoZSBiYXNlIG5hbWUgb2YgdGhlIHRlc3QgY2FzZSB0byByZWdpc3Rlci4gVGhpcyB3aWxsIGJlIHVzZWQgYXNcbiAqICB0aGUgcHJlZml4IGZvciB0aGUgYWN0dWFsIHRlc3QgY2FzZSBuYW1lLCB3aGljaCBpcyBzdWZmaXhlZCB3aXRoIGVpdGhlciB0aGVcbiAqICBjdXJyZW50IHBhcmFtZXRlciBzZXQgb3IgdGhlIHBhcmFtZXRlciBzZXQgbmFtZVxuICogQHBhcmFtIGNhc2VzIFRoZSBkaWZmZXJlbnQgdGVzdCBjYXNlIHBhcmFtZXRlciBzZXRzLiBFYWNoIHBhcmFtZXRlciBzZXQgaXMgYW5cbiAqICBhcnJheSBnaXZpbmcgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBjYWxsIHRvIGl0KCkuXG4gKlxuICogIEVhY2ggZW50cnkgaW4gdGhlIGFycmF5IGNhbiBiZSBvbmUgb2YgdHdvIHRoaW5nczpcbiAqICAxLiBhbiBhcnJheSBvZiBwYXJhbWV0ZXJzIGZvciB0aGlzIG9uZSBwYXJ0aWN1bGFyIHRlc3QgY2FzZVxuICogIDIuIGFuIG9iamVjdCBvZiB0aGUgZm9ybSB7IG5hbWU6IHN0cmluZywgcGFyYW1zOiB1bmtub3duW10gfVxuICpcbiAqIEluIHRoZSBmaXJzdCBjYXNlLCB0ZXN0cyBjYXNlIG5hbWVzIHdpbGwgYmUgZ2VuZXJhdGVkIGJ5IHN1ZmZpeGluZyB0aGUgYmFzZVxuICogbmFtZSB3aXRoIHRoZSBwYXJhbWV0ZXIgYXJyYXkuIFRoaXMgaXMgc3VpdGFibGUgZm9yIHRlc3QgY2FzZXMsIHdoZXJlIHlvdXJcbiAqIHBhcmFtZXRlcnMgYXJlIG5vdCB0b28gbGFyZ2Ugd2hlbiBwcmludGVkLiBJbiB0aGUgc2Vjb25kIGNhc2UsIHRlc3QgY2FzZXNcbiAqIHdpbGwgYmUgc3VmZml4ZWQgd2l0aCB0aGUgbmFtZSBmaWVsZCBvZiB0aGUgZ2l2ZW4gb2JqZWN0LCB3aGVyZWFzIHRoZVxuICogcGFyYW1zIGZpZWxkIGNvbnRhaW5zIHRoZSBhY3R1YWwgdGVzdCBjYXNlIHBhcmFtZXRlcnMuIFRoaXMgaXMgZm9yIGNhc2VzXG4gKiB3aGVyZSB1c2luZyB5b3VyIHBhcmFtZXRlcnMgYXMgdGVzdCBuYW1lcyB3b3VsZCBsZWFkIHRvIHZlcnkgbG9uZyBuYW1lcyBhbmRcbiAqIG1ha2UgcmVhZGluZyB0aGUgdGVzdCBsb2dzIHZlcnkgaGFyZC5cbiAqIEBwYXJhbSBmbiBUaGUgdGVzdCBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBtdXN0IGhhdmUgcGFyYW1ldGVycyBjb3JyZXNwb25kaW5nXG4gKiAgdG8gdGhlIGVudHJpZXMgaW4gb25lIHBhcmFtZXRlciBzZXQgaW4gdGhlIGNhc2VzIGFycmF5LlxuICovXG5mdW5jdGlvbiBlYWNoPFQgZXh0ZW5kcyB1bmtub3duW10+KFxuICBuYW1lOiBzdHJpbmcsXG4gIGNhc2VzOiBFYWNoQ2FzZVR5cGU8VD5bXSxcbiAgZm46ICguLi5wYXJhbXM6IFQpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LFxuKTogdm9pZDtcbmZ1bmN0aW9uIGVhY2g8VCBleHRlbmRzIHVua25vd25bXT4ob3B0aW9uczogRWFjaERlZmluaXRpb248VD4pOiB2b2lkO1xuZnVuY3Rpb24gZWFjaDxUIGV4dGVuZHMgdW5rbm93bltdPihcbiAgYTogc3RyaW5nIHwgRWFjaERlZmluaXRpb248VD4sXG4gIGNhc2VzPzogRWFjaENhc2VUeXBlPFQ+W10sXG4gIGZuPzogKC4uLnBhcmFtczogVCkgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4sXG4pOiB2b2lkIHtcbiAgbGV0IG15T3B0aW9uczogRWFjaERlZmluaXRpb248VD47XG4gIGlmICh0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIikge1xuICAgIG15T3B0aW9ucyA9IHsgbmFtZTogYSwgZm46IGZuISwgY2FzZXM6IGNhc2VzISB9O1xuICB9IGVsc2Uge1xuICAgIG15T3B0aW9ucyA9IGE7XG4gIH1cblxuICBteU9wdGlvbnMuY2FzZXMuZm9yRWFjaCgoYykgPT5cbiAgICBpdCh7XG4gICAgICBuYW1lOiBBcnJheS5pc0FycmF5KGMpXG4gICAgICAgID8gYCR7bXlPcHRpb25zLm5hbWV9OiAke2N9YFxuICAgICAgICA6IGAke215T3B0aW9ucy5uYW1lfTogJHtjLm5hbWV9YCxcbiAgICAgIGZuOiBBcnJheS5pc0FycmF5KGMpXG4gICAgICAgID8gKCkgPT4gbXlPcHRpb25zLmZuKC4uLmMpXG4gICAgICAgIDogKCkgPT4gbXlPcHRpb25zLmZuKC4uLmMucGFyYW1zKSxcbiAgICAgIGlnbm9yZTogbXlPcHRpb25zLmlnbm9yZSxcbiAgICAgIG9ubHk6IG15T3B0aW9ucy5vbmx5LFxuICAgICAgc2FuaXRpemVPcHM6IG15T3B0aW9ucy5zYW5pdGl6ZU9wcyxcbiAgICAgIHNhbml0aXplUmVzb3VyY2VzOiBteU9wdGlvbnMuc2FuaXRpemVSZXNvdXJjZXMsXG4gICAgICBzYW5pdGl6ZUV4aXQ6IG15T3B0aW9ucy5zYW5pdGl6ZUV4aXQsXG4gICAgfSlcbiAgKTtcbn1cblxuZXhwb3J0IHR5cGUgRm9jdXNJdERlZmluaXRpb24gPSBPbWl0PEl0RGVmaW5pdGlvbiwgXCJpZ25vcmVcIiB8IFwib25seVwiPjtcbmZ1bmN0aW9uIGZvY3VzSXQoXG4gIGlnbm9yZTogYm9vbGVhbixcbiAgb25seTogYm9vbGVhbixcbiAgYTogc3RyaW5nIHwgRm9jdXNJdERlZmluaXRpb24sXG4gIGZuPzogKCkgPT4gdm9pZCxcbik6IHZvaWQge1xuICBsZXQgb3B0aW9uczogSXREZWZpbml0aW9uIHwgdm9pZDtcbiAgaWYgKHR5cGVvZiBhID09PSBcInN0cmluZ1wiKSB7XG4gICAgb3B0aW9ucyA9IHsgbmFtZTogYSwgZm46IGZuISB9O1xuICB9IGVsc2Uge1xuICAgIG9wdGlvbnMgPSB7IC4uLmEgfTtcbiAgfVxuICBvcHRpb25zLmlnbm9yZSA9IGlnbm9yZTtcbiAgb3B0aW9ucy5vbmx5ID0gb25seTtcbiAgaXQob3B0aW9ucyk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXIgYSBmb2N1c2VkIHRlc3Qgd2hpY2ggd2lsbCBydW4gd2hlbiBgZGVubyB0ZXN0YCBpcyB1c2VkIG9uIHRoZSBjb21tYW5kIGxpbmVcbiAqIGFuZCB0aGUgY29udGFpbmluZyBtb2R1bGUgbG9va3MgbGlrZSBhIHRlc3QgbW9kdWxlLlxuICovXG5mdW5jdGlvbiBmaXQobmFtZTogc3RyaW5nLCBmbjogKCkgPT4gdm9pZCk6IHZvaWQ7XG5mdW5jdGlvbiBmaXQob3B0aW9uczogRm9jdXNJdERlZmluaXRpb24pOiB2b2lkO1xuZnVuY3Rpb24gZml0KGE6IHN0cmluZyB8IEZvY3VzSXREZWZpbml0aW9uLCBmbj86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgZm9jdXNJdChmYWxzZSwgdHJ1ZSwgYSwgZm4pO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVyIGFuIGlnbm9yZWQgdGVzdCB3aGljaCB3aWxsIHJ1biB3aGVuIGBkZW5vIHRlc3RgIGlzIHVzZWQgb24gdGhlIGNvbW1hbmQgbGluZVxuICogYW5kIHRoZSBjb250YWluaW5nIG1vZHVsZSBsb29rcyBsaWtlIGEgdGVzdCBtb2R1bGUuXG4gKi9cbmZ1bmN0aW9uIHhpdChuYW1lOiBzdHJpbmcsIGZuOiAoKSA9PiB2b2lkKTogdm9pZDtcbmZ1bmN0aW9uIHhpdChvcHRpb25zOiBGb2N1c0l0RGVmaW5pdGlvbik6IHZvaWQ7XG5mdW5jdGlvbiB4aXQoYTogc3RyaW5nIHwgRm9jdXNJdERlZmluaXRpb24sIGZuPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICBmb2N1c0l0KHRydWUsIGZhbHNlLCBhLCBmbik7XG59XG5cbmZ1bmN0aW9uIHNldEhvb2soXG4gIGtleTogXCJiZWZvcmVFYWNoXCIgfCBcImFmdGVyRWFjaFwiIHwgXCJiZWZvcmVBbGxcIiB8IFwiYWZ0ZXJBbGxcIixcbiAgZm46ICgoKSA9PiB2b2lkKSB8ICgoKSA9PiBQcm9taXNlPHZvaWQ+KSxcbikge1xuICBpZiAoIWN1cnJlbnRTdWl0ZSkgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gbm90IGFsbG93ZWQgZ2xvYmFsbHlgKTtcbiAgaWYgKGFyZUhvb2tzTG9ja2VkKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgJHtrZXl9IG11c3QgYmUgY2FsbGVkIGJlZm9yZSBjaGlsZCBzdWl0ZXMgYW5kIHRlc3RzIGluIHN1aXRlYCxcbiAgICApO1xuICB9XG4gIGlmIChjdXJyZW50Q29udGV4dCFba2V5XSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtrZXl9IGFscmVhZHkgY2FsbGVkIGZvciBzdWl0ZWApO1xuICB9XG4gIGN1cnJlbnRDb250ZXh0IVtrZXldID0gdHJ1ZTtcbiAgY29uc3Qgc3VpdGU6IFRlc3RTdWl0ZTx2b2lkPiA9IGN1cnJlbnRTdWl0ZTtcbiAgVGVzdFN1aXRlLnNldEhvb2tzKHN1aXRlLCB7IFtrZXldOiBmbiB9KTtcbn1cblxuLyoqIFJ1biBzb21lIHNoYXJlZCBzZXR1cCBiZWZvcmUgZWFjaCB0ZXN0IGluIHRoZSBzdWl0ZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiZWZvcmVFYWNoKGZuOiAoKCkgPT4gdm9pZCkgfCAoKCkgPT4gUHJvbWlzZTx2b2lkPikpOiB2b2lkIHtcbiAgc2V0SG9vayhcImJlZm9yZUVhY2hcIiwgZm4pO1xufVxuXG4vKiogUnVuIHNvbWUgc2hhcmVkIHRlYXJkb3duIGFmdGVyIGVhY2ggdGVzdCBpbiB0aGUgc3VpdGUuICovXG5leHBvcnQgZnVuY3Rpb24gYWZ0ZXJFYWNoKGZuOiAoKCkgPT4gdm9pZCkgfCAoKCkgPT4gUHJvbWlzZTx2b2lkPikpOiB2b2lkIHtcbiAgc2V0SG9vayhcImFmdGVyRWFjaFwiLCBmbik7XG59XG5cbi8qKiBSdW4gc29tZSBzaGFyZWQgc2V0dXAgYmVmb3JlIGFsbCBvZiB0aGUgdGVzdHMgaW4gdGhlIHN1aXRlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJlZm9yZUFsbChmbjogKCgpID0+IHZvaWQpIHwgKCgpID0+IFByb21pc2U8dm9pZD4pKTogdm9pZCB7XG4gIHNldEhvb2soXCJiZWZvcmVBbGxcIiwgZm4pO1xufVxuXG4vKiogUnVuIHNvbWUgc2hhcmVkIHRlYXJkb3duIGFmdGVyIGFsbCBvZiB0aGUgdGVzdHMgaW4gdGhlIHN1aXRlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFmdGVyQWxsKGZuOiAoKCkgPT4gdm9pZCkgfCAoKCkgPT4gUHJvbWlzZTx2b2lkPikpOiB2b2lkIHtcbiAgc2V0SG9vayhcImFmdGVyQWxsXCIsIGZuKTtcbn1cblxuZXhwb3J0IHsgZGVzY3JpYmUsIGVhY2gsIGZkZXNjcmliZSwgZml0LCBpdCwgeGRlc2NyaWJlLCB4aXQgfTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxTQUNFLElBQUksRUFFSixTQUFTLFFBRUosaUJBQWlCLENBQUM7QUFtRXpCLE1BQU0sV0FBVyxHQUFjLEVBQUUsQUFBQztBQUNsQyxTQUFTLGNBQWMsR0FBWTtJQUNqQyxPQUFPLFdBQVcsQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQztDQUNyRDtBQUNELFNBQVMsU0FBUyxHQUFTO0lBQ3pCLElBQUksV0FBVyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDNUIsTUFBTSxJQUFJLEtBQUssQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO0tBQ3hEO0lBQ0QsV0FBVyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0NBQzVDO0FBRUQsSUFBSSxjQUFjLEdBQW1CLElBQUksQUFBQztBQUMxQyxJQUFJLFlBQVksR0FBMkIsSUFBSSxBQUFDO0FBU2hELFNBQVMsUUFBUSxDQUFDLENBQThCLEVBQUUsRUFBZSxFQUFRO0lBQ3ZFLElBQUksT0FBTyxBQUFrQyxBQUFDO0lBQzlDLElBQUksT0FBTyxDQUFDLEtBQUssUUFBUSxFQUFFO1FBQ3pCLE9BQU8sR0FBRztZQUFFLElBQUksRUFBRSxDQUFDO1NBQUUsQ0FBQztLQUN2QixNQUFNO1FBQ0wsRUFBRSxH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